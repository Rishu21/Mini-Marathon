<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanvidhan Jagar Mini Marathon - Entry Form</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, rgba(30, 60, 114, 0.85) 0%, rgba(42, 82, 152, 0.85) 100%),
                        url('https://res.cloudinary.com/dqcbi0kkh/image/upload/v1763190856/Running_Marathon.webp_f3g2ax.jpg');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }

        .header > * {
            position: relative;
            z-index: 1;
        }

        .logos {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .logo-container {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .logo-container img {
            height: 80px;
            width: auto;
            display: block;
            object-fit: contain;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5em;
            font-weight: 900;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.4);
            letter-spacing: 1px;
            line-height: 1.2;
        }

        .subheading {
            font-family: 'Poppins', sans-serif;
            font-size: 1.2em;
            font-weight: 600;
            color: #ffd700;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-style: italic;
            letter-spacing: 0.5px;
        }

        .event-details {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .event-details p {
            margin: 8px 0;
            font-size: 1.05em;
        }

        .event-details strong {
            color: #ffd700;
        }

        .form-content {
            padding: 40px 30px;
        }

        .section-title {
            font-size: 1.5em;
            color: #1e3c72;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title:first-child {
            margin-top: 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 0.95em;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
            font-family: inherit;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .radio-option input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-group {
            margin: 15px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: start;
            gap: 10px;
            margin: 12px 0;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-top: 2px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            font-weight: 400;
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .fee-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .payment-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
            border: 3px solid #667eea;
        }

        .payment-section h3 {
            color: #1e3c72;
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        .payment-instructions {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: left;
            border-left: 4px solid #ffc107;
        }

        .payment-instructions p {
            color: #856404;
            margin: 8px 0;
            font-size: 0.95em;
        }

        .payment-instructions strong {
            color: #1e3c72;
        }

        .qr-code-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            display: inline-block;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .qr-code-container img {
            width: 250px;
            height: 250px;
            display: block;
            border-radius: 10px;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .organizer-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }

        .organizer-info h3 {
            color: #1e3c72;
            margin-bottom: 10px;
        }

        .organizer-info p {
            margin: 5px 0;
            color: #555;
        }

        .route-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 0.95em;
            color: #1565c0;
            line-height: 1.6;
        }

        .success-message {
            display: none;
            background: #4caf50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.1em;
        }

        .error-message {
            display: none;
            background: #f44336;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.1em;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-weight: bold;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.8em;
            }

            .subheading {
                font-size: 1em;
            }
            
            .form-content {
                padding: 30px 20px;
            }
            
            .logos {
                gap: 15px;
            }
            
            .logo-container img {
                height: 60px;
            }

            .radio-group {
                flex-direction: column;
                gap: 10px;
            }

            .qr-code-container img {
                width: 200px;
                height: 200px;
            }

            .payment-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logos">
                <div class="logo-container">
                    <img src="https://res.cloudinary.com/dqcbi0kkh/image/upload/v1763190854/images_bmu0hw.jpg" alt="Kapil Nagar Yuvak Mandal">
                </div>
                <div class="logo-container">
                    <img src="https://res.cloudinary.com/dqcbi0kkh/image/upload/v1763190854/5d3880fa-a681-42fd-bc82-b12b84bfb901_mzwwom.jpg" alt="Gagan Malik Foundation">
                </div>
            </div>
            <h1>Sanvidhan Jagar Mini Marathon</h1>
            <div class="subheading">‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§ï‡•Ä ‡§∞‡§ï‡•ç‡§∑‡§æ, ‡§¶‡•á‡§∂ ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</div>
            <div class="event-details">
                <p><strong>üìÖ Date:</strong> 26 November 2025</p>
                <p><strong>‚è∞ Time:</strong> 8:00 AM</p>
                <p><strong>üìç City:</strong> Nagpur, Maharashtra</p>
            </div>
        </div>

        <div class="form-content">
            <div class="fee-box">
                Registration Fee: ‚Çπ100
            </div>

            <div class="route-info">
                <strong>üó∫Ô∏è Marathon Route:</strong> Kapil Nagar ‚Üí Mahada Chowk ‚Üí Manas Mandir ‚Üí Kaach Company ‚Üí Sugat Nagar Buddha Vihar ‚Üí Tathagat Chowk ‚Üí Patankar Chowk ‚Üí Dr. Babasaheb Ambedkar Convention Center ‚Üí Teka Naka ‚Üí Kapil Nagar
            </div>

            <form id="marathonForm">
                <div class="section-title">üë§ Participant Information</div>
                
                <div class="form-group">
                    <label for="fullName">Full Name *</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label>Gender *</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="male" name="gender" value="male" required>
                            <label for="male">Male</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="female" name="gender" value="female" required>
                            <label for="female">Female</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="other" name="gender" value="other" required>
                            <label for="other">Other</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="dob">Date of Birth (Must be 15+ years) *</label>
                    <input type="date" id="dob" name="dob" max="2010-11-26" required>
                </div>

                <div class="form-group">
                    <label for="age">Age *</label>
                    <input type="number" id="age" name="age" min="15" required readonly>
                </div>

                <div class="form-group">
                    <label for="address">Address *</label>
                    <textarea id="address" name="address" required></textarea>
                </div>

                <div class="form-group">
                    <label for="mobile">Mobile Number *</label>
                    <input type="tel" id="mobile" name="mobile" pattern="[0-9]{10}" placeholder="10 digit mobile number" required>
                </div>

                <div class="form-group">
                    <label for="email">Email (Optional)</label>
                    <input type="email" id="email" name="email" placeholder="your.email@example.com">
                </div>

                <div class="section-title">üö® Emergency Contact</div>

                <div class="form-group">
                    <label for="emergencyName">Name *</label>
                    <input type="text" id="emergencyName" name="emergencyName" required>
                </div>

                <div class="form-group">
                    <label for="relation">Relation *</label>
                    <input type="text" id="relation" name="relation" placeholder="e.g., Father, Mother, Spouse" required>
                </div>

                <div class="form-group">
                    <label for="emergencyPhone">Phone Number *</label>
                    <input type="tel" id="emergencyPhone" name="emergencyPhone" pattern="[0-9]{10}" placeholder="10 digit mobile number" required>
                </div>

                <div class="section-title">üè• Medical Information</div>

                <div class="form-group">
                    <label>Do you have any medical conditions, injuries, or allergies? *</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="medicalYes" name="medicalCondition" value="yes" required>
                            <label for="medicalYes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="medicalNo" name="medicalCondition" value="no" required>
                            <label for="medicalNo">No</label>
                        </div>
                    </div>
                </div>

                <div class="form-group" id="medicalDetailsGroup" style="display: none;">
                    <label for="medicalDetails">Please specify your medical conditions *</label>
                    <textarea id="medicalDetails" name="medicalDetails" placeholder="Please provide details about your medical conditions, injuries, or allergies"></textarea>
                </div>

                <div class="section-title">üÜî ID Proof</div>

                <div class="form-group">
                    <label for="aadhaar">Aadhaar Number *</label>
                    <input type="text" id="aadhaar" name="aadhaar" pattern="[0-9]{12}" maxlength="12" placeholder="12 digit Aadhaar number" required>
                </div>

                <div class="section-title">üìù Declaration & Consent</div>

                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="declare1" name="declare1" required>
                        <label for="declare1">I hereby declare that I am voluntarily participating in the Sanvidhan Jagar Mini Marathon.</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="declare2" name="declare2" required>
                        <label for="declare2">I am physically fit and take full responsibility for my safety during the event.</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="declare3" name="declare3" required>
                        <label for="declare3">I understand that the organizers are not liable for any illness, injury, loss, or damage.</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="declare4" name="declare4" required>
                        <label for="declare4">I confirm that all the information provided is true to the best of my knowledge.</label>
                    </div>
                </div>

                <div id="guardianSection" style="display: none;">
                    <div class="section-title">üë®‚Äçüë©‚Äçüëß Parent/Guardian Information (Required for under 18)</div>
                    
                    <div class="form-group">
                        <label for="guardianName">Parent/Guardian Name *</label>
                        <input type="text" id="guardianName" name="guardianName">
                    </div>
                </div>

                <div class="section-title">üí≥ Payment Information</div>

                <div class="payment-section">
                    <h3>üì± Scan QR Code to Pay ‚Çπ100</h3>
                    
                    <div class="payment-instructions">
                        <p><strong>Payment Steps:</strong></p>
                        <p>1Ô∏è‚É£ Scan the QR code below using any UPI app (GPay, PhonePe, Paytm, etc.)</p>
                        <p>2Ô∏è‚É£ Pay exactly <strong>‚Çπ100</strong></p>
                        <p>3Ô∏è‚É£ After payment, copy the <strong>Transaction ID</strong> from your UPI app</p>
                        <p>4Ô∏è‚É£ Enter the Transaction ID in the field below</p>
                        <p>5Ô∏è‚É£ Click Submit Registration</p>
                    </div>

                    <div class="qr-code-container">
                        <img src="https://res.cloudinary.com/dqcbi0kkh/image/upload/v1763195323/PHOTO-2025-11-15-13-52-31_vhkxyx.jpg" alt="UPI Payment QR Code">
                    </div>

                    <p style="color: #1e3c72; font-weight: 600; margin-top: 15px;">
                        üí° Payment is mandatory to complete registration
                    </p>
                </div>

                <div class="form-group">
                    <label for="transactionId">UPI Transaction ID * (12 digit number)</label>
                    <input type="text" id="transactionId" name="transactionId" placeholder="Enter 12 digit Transaction ID" pattern="[0-9]{12}" maxlength="12" required>
                    <small style="color: #666; display: block; margin-top: 5px;">
                        Example: 123456789012 (Find this in your UPI payment confirmation)
                    </small>
                </div>

                <div class="loading" id="loadingMessage">
                    ‚è≥ Submitting your registration...
                </div>

                <div class="success-message" id="successMessage">
                    ‚úÖ Registration Successful! Your form has been submitted. We will verify your payment and confirm shortly.
                </div>

                <div class="error-message" id="errorMessage">
                    ‚ùå Submission failed. Please try again or contact the organizers.
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">üéØ Submit Registration</button>
            </form>

            <div class="organizer-info">
                <h3>üìû Contact Information</h3>
                <p><strong>Organized By:</strong></p>
                <p>‚Ä¢ Gagan Malik Foundation</p>
                <p>‚Ä¢ Kapil Nagar Yuvak Mandal</p>
                <p style="margin-top: 15px;"><strong>For Queries:</strong></p>
                <p>üì± Gunwant Sontakke: 8237791944</p>
                <p>üì± Ashitosh (Tinku) Kamble: 9834965581</p>
                <p>üì± Rohit Marsinghe: 9370274013</p>
                <p>üì± Aniket Paunikar: 8999040734</p>
                <p>üì± Saurabh Sukhdeve: 9021730876</p>
            </div>
        </div>
    </div>

    <script>
        // IMPORTANT: Replace this with your Google Apps Script Web App URL
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxNLS_O85-xcEolbQvSr0gEoxKnI4zuKwX4pjZ3NLxgGq4k9tRdILROpxXhllpGcpZkdA/exec';

        // Calculate age from date of birth
        document.getElementById('dob').addEventListener('change', function() {
            const dob = new Date(this.value);
            const today = new Date();
            let age = today.getFullYear() - dob.getFullYear();
            const monthDiff = today.getMonth() - dob.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                age--;
            }
            
            document.getElementById('age').value = age;
            
            // Show/hide guardian section based on age
            const guardianSection = document.getElementById('guardianSection');
            const guardianName = document.getElementById('guardianName');
            
            if (age < 18) {
                guardianSection.style.display = 'block';
                guardianName.required = true;
            } else {
                guardianSection.style.display = 'none';
                guardianName.required = false;
                guardianName.value = '';
            }
        });

        // Show/hide medical details based on selection
        document.querySelectorAll('input[name="medicalCondition"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const medicalDetailsGroup = document.getElementById('medicalDetailsGroup');
                const medicalDetails = document.getElementById('medicalDetails');
                
                if (this.value === 'yes') {
                    medicalDetailsGroup.style.display = 'block';
                    medicalDetails.required = true;
                } else {
                    medicalDetailsGroup.style.display = 'none';
                    medicalDetails.required = false;
                    medicalDetails.value = '';
                }
            });
        });

        // Format transaction ID input
        document.getElementById('transactionId').addEventListener('input', function(e) {
            this.value = this.value.replace(/\D/g, '');
        });

        // Form submission
        document.getElementById('marathonForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Collect form data
            const formData = {
                fullName: document.getElementById('fullName').value,
                gender: document.querySelector('input[name="gender"]:checked').value,
                dob: document.getElementById('dob').value,
                age: document.getElementById('age').value,
                address: document.getElementById('address').value,
                mobile: document.getElementById('mobile').value,
                email: document.getElementById('email').value,
                emergencyContact: {
                    name: document.getElementById('emergencyName').value,
                    relation: document.getElementById('relation').value,
                    phone: document.getElementById('emergencyPhone').value
                },
                medicalCondition: document.querySelector('input[name="medicalCondition"]:checked').value,
                medicalDetails: document.getElementById('medicalDetails').value,
                aadhaar: document.getElementById('aadhaar').value,
                guardianName: document.getElementById('guardianName').value,
                transactionId: document.getElementById('transactionId').value
            };
            
            // Show loading, hide messages
            document.getElementById('loadingMessage').style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('submitBtn').disabled = true;
            
            try {
                // Send to Google Sheets
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                // Hide loading
                document.getElementById('loadingMessage').style.display = 'none';
                
                // Show success message
                const successMessage = document.getElementById('successMessage');
                successMessage.style.display = 'block';
                
                // Scroll to success message
                successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Reset form after 3 seconds
                setTimeout(() => {
                    this.reset();
                    successMessage.style.display = 'none';
                    document.getElementById('guardianSection').style.display = 'none';
                    document.getElementById('medicalDetailsGroup').style.display = 'none';
                    document.getElementById('submitBtn').disabled = false;
                }, 3000);
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('loadingMessage').style.display = 'none';
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('submitBtn').disabled = false;
                
                // Hide error after 5 seconds
                setTimeout(() => {
                    document.getElementById('errorMessage').style.display = 'none';
                }, 5000);
            }
        });

        // Format Aadhaar input
        document.getElementById('aadhaar').addEventListener('input', function(e) {
            this.value = this.value.replace(/\D/g, '');
        });

        // Format mobile numbers
        document.getElementById('mobile').addEventListener('input', function(e) {
            this.value = this.value.replace(/\D/g, '');
        });

        document.getElementById('emergencyPhone').addEventListener('input', function(e) {
            this.value = this.value.replace(/\D/g, '');
        });
    </script>
</body>
</html>
